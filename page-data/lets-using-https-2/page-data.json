{"componentChunkName":"component---src-templates-blog-post-js","path":"/lets-using-https-2/","result":{"data":{"site":{"siteMetadata":{"title":"Blog.kt"}},"markdownRemark":{"id":"03b53896-89f8-5f11-9265-8165c0c155fe","excerpt":"为我的新站点启用HTTPS但是仍然遇到了一些障碍\n说明还有一些问题没有搞清楚… cloudflare申请的origin certificate无法直接作为服务器证书文件，应该在服务器制作证书，然后上传，由cloudflare签发 使用ssl.md进行签发速度很快，需要到邮件中收取crt…","html":"<p>为我的新站点启用HTTPS但是仍然遇到了一些障碍\n说明还有一些问题没有搞清楚…</p>\n<ol>\n<li>cloudflare申请的origin certificate无法直接作为服务器证书文件，应该在服务器制作证书，然后上传，由cloudflare签发</li>\n<li>使用ssl.md进行签发速度很快，需要到邮件中收取crt文件，即可</li>\n<li>增强安全性</li>\n</ol>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\">SSLProtocol             all <span class=\"token parameter variable\">-SSLv2</span> <span class=\"token parameter variable\">-SSLv3</span>\n\nSSLCipherSuite          ECDHE-RSA-AES128-GCM-SHA256:ECDHE-ECDSA-AES128-GCM-SHA256:ECDHE-RSA-AES256-GCM-SHA384:ECDHE-ECDSA-AES256-GCM-SHA384:DHE-RSA-AES128-GCM-SHA256:DHE-DSS-AES128-GCM-SHA256:kEDH+AESGCM:ECDHE-RSA-AES128-SHA256:ECDHE-ECDSA-AES128-SHA256:ECDHE-RSA-AES128-SHA:ECDHE-ECDSA-AES128-SHA:ECDHE-RSA-AES256-SHA384:ECDHE-ECDSA-AES256-SHA384:ECDHE-RSA-AES256-SHA:ECDHE-ECDSA-AES256-SHA:DHE-RSA-AES128-SHA256:DHE-RSA-AES128-SHA:DHE-DSS-AES128-SHA256:DHE-RSA-AES256-SHA256:DHE-DSS-AES256-SHA:DHE-RSA-AES256-SHA:AES128-GCM-SHA256:AES256-GCM-SHA384:AES128-SHA256:AES256-SHA256:AES128-SHA:AES256-SHA:AES:CAMELLIA:DES-CBC3-SHA:<span class=\"token operator\">!</span>aNULL:<span class=\"token operator\">!</span>eNULL:<span class=\"token operator\">!</span>EXPORT:<span class=\"token operator\">!</span>DES:<span class=\"token operator\">!</span>RC4:<span class=\"token operator\">!</span>MD5:<span class=\"token operator\">!</span>PSK:<span class=\"token operator\">!</span>aECDH:<span class=\"token operator\">!</span>EDH-DSS-DES-CBC3-SHA:<span class=\"token operator\">!</span>EDH-RSA-DES-CBC3-SHA:<span class=\"token operator\">!</span>KRB5-DES-CBC3-SHA\n\nSSLHonorCipherOrder on</code></pre></div>\n<ol start=\"4\">\n<li>使用HSTS</li>\n</ol>\n<ul>\n<li>本想直接用cloudflare的，但是还是自己搞靠谱一点…</li>\n<li>报文长度修改</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\"><span class=\"token comment\">##在HTTPS中</span>\nHeader always <span class=\"token builtin class-name\">set</span> Strict-Transport-Security <span class=\"token string\">\"max-age=63072000; includeSubdomains; preload\"</span></code></pre></div>\n<ul>\n<li>强制重定向/重写(觉得重定向的性能高一点？…)</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\">ServerName example.com\n  Redirect permanent / https://example.com/</code></pre></div>\n<p><em>2016年10月3日01:05:47</em>\n使用acme.sh创建的fullchain.cer文件，就是网站的证书+中间证书，直接部署在ssl_certificate就行了</p>","frontmatter":{"title":"启用 HTTPS 札记（续）","date":"2016-09-21","description":"为我的新站点启用HTTPS但是仍然遇到了一些障碍...","excerpt":null}},"previous":{"fields":{"slug":"lets-using-https"},"frontmatter":{"title":"启用 HTTPS 札记"}},"next":{"fields":{"slug":"Github-page-configure-and-enable-HTTPS"},"frontmatter":{"title":"GitHub Page 子域名配置 & 启用 HTTPS"}}},"pageContext":{"id":"03b53896-89f8-5f11-9265-8165c0c155fe","previousPostId":"4d27c5a0-46b4-5941-ba1d-a2235a024afb","nextPostId":"f387e4c2-cbd8-525e-b175-8c8daf2744fd"}},"staticQueryHashes":["2082311839","2355076697","959449634"],"slicesMap":{}}