{"componentChunkName":"component---src-templates-blog-post-js","path":"/Use-NW-to-build-a-web-app/","result":{"data":{"site":{"siteMetadata":{"title":"Blog.kt"}},"markdownRemark":{"id":"98393af1-24c6-5be3-8228-08b237579199","excerpt":"前言 因为早上想用咕咕机（Memobird）打印一下天气，发现他还有 Web 版本。然后想着能不能打包成一个，直接丢到桌面执行，不想每次都打开浏览器、网页什么的… 然后了解了一下Electron 和 NW.js。然后顺着用了后者尝试打包了一下，发现还是挺简单的。 因为个人不需要添加过多的功能，所以使用门槛较低的 NW…","html":"<h1>前言</h1>\n<p>因为早上想用<a href=\"https://www.memobird.shop/\">咕咕机</a>（Memobird）打印一下天气，发现他还有 Web 版本。然后想着能不能打包成一个<code class=\"language-text\">.exe</code>，直接丢到桌面执行，不想每次都打开浏览器、网页什么的…</p>\n<p>然后了解了一下<a href=\"https://electronjs.org/\">Electron</a> 和 <a href=\"https://nwjs.io/\">NW.js</a>。然后顺着用了后者尝试打包了一下，发现还是挺简单的。</p>\n<p>因为个人不需要添加过多的功能，所以使用门槛较低的 NW.js 来实现。如果你需要添加更多自定义的功能，可以考虑使用前者来完成你的开发工作。</p>\n<p>下面是过程。</p>\n<h1>1. 软件准备</h1>\n<p>不太喜欢每到一步就去下载一个软件，个人喜欢把软件和环境先准备好。</p>\n<p>本文章环境为 Win10，使用 Linux 的同学自己应该可以解决这些小问题。</p>\n<ul>\n<li><a href=\"https://nwjs.io/\">NW.js</a>（*必要）\n<ul>\n<li>本次工作的主体软件</li>\n<li>需要下载，然后解压</li>\n<li>解压后的目录为我们本次的工作根目录</li>\n</ul>\n</li>\n<li><a href=\"http://enigmaprotector.com/en/downloads.html\">Enigma Virtual Box</a>（*必要）\n<ul>\n<li>打包工具，后面用它来打包成可执行<code class=\"language-text\">.exe</code>文件</li>\n<li>需要下载并安装</li>\n</ul>\n</li>\n<li><a href=\"https://www.axialis.com/iconworkshop/\">IconWorkshop-Pro</a>（*可选）\n<ul>\n<li>用于创建程序的图标资源，需要下载并安装</li>\n<li>可以创建各种尺寸一整套图标，如果你没有这样的需求，自己用随便找一张图片转为<code class=\"language-text\">icon</code>格式的也可以</li>\n<li>或者直接使用默认的图标</li>\n</ul>\n</li>\n<li><a href=\"http://www.angusj.com/resourcehacker/\">Resource Hacker</a>（*可选）\n<ul>\n<li>用于修改程序的 <code class=\"language-text\">icon</code></li>\n<li>需要下载并安装</li>\n</ul>\n</li>\n</ul>\n<h1>2. 打包</h1>\n<p>第一步里，我们解压了 NW.js 的压缩包，现在我们进入该目录。然后着手开始我们的工作。</p>\n<p><img src=\"https://img.ioioi.top/wiki/explorer_2018-03-08_15-43-42.png\" alt=\"pic1\"></p>\n<h2>2.1 创建一个项目文件夹</h2>\n<p>在当前目录下创建一个文件夹并<strong>进入</strong>。文件夹命名随意，比如我命名为<code class=\"language-text\">memobird</code>。</p>\n<p><img src=\"https://img.ioioi.top/wiki/explorer_2018-03-08_15-45-08.png\" alt=\"pic2\"></p>\n<p>接着我们在当前目录下，创建两个文件：<code class=\"language-text\">index.html</code>和<code class=\"language-text\">package.json</code>。</p>\n<p><img src=\"https://img.ioioi.top/wiki/explorer_2018-03-08_15-47-37.png\" alt=\"pic3\"></p>\n<ul>\n<li><code class=\"language-text\">index.html</code>\n<ul>\n<li>打包后程序的入口文件，你可以在这个文件里设置一个跳转链接到目标网站</li>\n</ul>\n</li>\n</ul>\n<p>我的内容如下：</p>\n<div class=\"gatsby-highlight\" data-language=\"html\"><pre class=\"language-html\"><code class=\"language-html\"><span class=\"token doctype\"><span class=\"token punctuation\">&lt;!</span><span class=\"token doctype-tag\">DOCTYPE</span> <span class=\"token name\">html</span><span class=\"token punctuation\">></span></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>html</span> <span class=\"token attr-name\">lang</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>en<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>head</span><span class=\"token punctuation\">></span></span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>meta</span> <span class=\"token attr-name\">charset</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>UTF-8<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>title</span><span class=\"token punctuation\">></span></span>memobird<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>title</span><span class=\"token punctuation\">></span></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>head</span><span class=\"token punctuation\">></span></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>body</span><span class=\"token punctuation\">></span></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>script</span><span class=\"token punctuation\">></span></span><span class=\"token script\"><span class=\"token language-javascript\">\n    window<span class=\"token punctuation\">.</span>location<span class=\"token punctuation\">.</span>href <span class=\"token operator\">=</span> <span class=\"token string\">\"http://w.memobird.cn/cn/w/login.aspx\"</span><span class=\"token punctuation\">;</span>\n</span></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>script</span><span class=\"token punctuation\">></span></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>body</span><span class=\"token punctuation\">></span></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>html</span><span class=\"token punctuation\">></span></span></code></pre></div>\n<p>可以看到，我设置了一个跳转，跳到咕咕机的 Web 版页面。你只需要把你的目标网站链接替换进去就行了。</p>\n<ul>\n<li><code class=\"language-text\">package.json</code>\n<ul>\n<li>NW.js 的配置文件</li>\n</ul>\n</li>\n</ul>\n<p>我的内容如下：</p>\n<div class=\"gatsby-highlight\" data-language=\"json\"><pre class=\"language-json\"><code class=\"language-json\"><span class=\"token punctuation\">{</span>\n    <span class=\"token property\">\"name\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"Memobird\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token property\">\"version\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"0.01\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token property\">\"main\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"index.html\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token property\">\"window\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token property\">\"width\"</span><span class=\"token operator\">:</span> <span class=\"token number\">1024</span><span class=\"token punctuation\">,</span>\n      <span class=\"token property\">\"height\"</span><span class=\"token operator\">:</span> <span class=\"token number\">768</span><span class=\"token punctuation\">,</span>\n      <span class=\"token property\">\"title\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"Memobird\"</span>\n    <span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">}</span></code></pre></div>\n<p>此处只有几个参数，非常简单。</p>\n<ul>\n<li><code class=\"language-text\">name</code>\n<ul>\n<li>应用名称</li>\n</ul>\n</li>\n<li><code class=\"language-text\">version</code>\n<ul>\n<li>版本号</li>\n</ul>\n</li>\n<li><code class=\"language-text\">main</code>\n<ul>\n<li>程序入口页面</li>\n</ul>\n</li>\n<li><code class=\"language-text\">windows</code>\n<ul>\n<li>程序窗口设置</li>\n</ul>\n</li>\n</ul>\n<p>这两个文件编辑好之后，将这两个文件打包为一个<code class=\"language-text\">.zip</code>格式的压缩包，并压缩包后缀改为<code class=\"language-text\">.nw</code>。</p>\n<p><img src=\"https://img.ioioi.top/wiki/Snipaste_2018-03-08_15-57-35.png\" alt=\"pic\"></p>\n<p><em>图示为使用 7-zip 压缩软件，你可以使用任何能达到同样效果的压缩软件</em>。</p>\n<p><img src=\"https://img.ioioi.top/wiki/Snipaste_2018-03-08_15-59-19.png\" alt=\"pic\"></p>\n<p><img src=\"https://img.ioioi.top/wiki/Snipaste_2018-03-08_15-59-30.png\" alt=\"pic\"></p>\n<p>接着，把<code class=\"language-text\">.nw</code>后缀的文件，复制到上一目录，也即是我们工作的根目录。</p>\n<p><img src=\"https://img.ioioi.top/wiki/2018-03-08_16-03-00.png\" alt=\"pic\"></p>\n<h2>2.2 修改图标</h2>\n<p>如果你不需要修改图标，那么可以直接跳过这一步。我们在这里需要先修改<code class=\"language-text\">nw.exe</code>的图标，因为待会用<code class=\"language-text\">nw.exe</code>打包之后，默认图标就是<code class=\"language-text\">nw.exe</code>的图标。</p>\n<p>打开<a href=\"http://www.iconworkshop.cn/\">IconWorkshop</a>软件，不需要选择创建<code class=\"language-text\">icon</code>，而是打开一张你选好的图片会比较快。当然，你也可以自己从零开始创建一个<code class=\"language-text\">icon</code>。</p>\n<p><img src=\"https://img.ioioi.top/wiki/2018-03-08_16-13-21.png\" alt=\"pic\"></p>\n<p>在图片窗口左上角，找到创建<code class=\"language-text\">icon</code>的功能按钮。</p>\n<p><img src=\"https://img.ioioi.top/wiki/2018-03-08_16-14-45.png\" alt=\"pic\"></p>\n<p>在弹出的对话框中，你可以自定义图标的信息。如果没什么要求直接确定即可。</p>\n<p>点击确定之后，它会回到刚刚的图标窗口，这时候需要保存一下。</p>\n<p><img src=\"https://img.ioioi.top/wiki/2018-03-08_16-16-41.png\" alt=\"pic\"></p>\n<p>这样我们的图标就制作完成了。</p>\n<p>接着使用 Resource Hacker 修改 <code class=\"language-text\">nw.exe</code> 的图标。</p>\n<ul>\n<li>打开 Resource Hacker</li>\n<li>直接将 <code class=\"language-text\">nw.exe</code>拖入程序窗口</li>\n<li>在左侧目录中找到<code class=\"language-text\">Icon Group</code>目录，并在子文件中找到默认图标</li>\n</ul>\n<p><img src=\"https://img.ioioi.top/wiki/2018-03-08_16-18-52.png\" alt=\"pic\"></p>\n<ul>\n<li>接着右击该图标，选择 replace icon\n<ul>\n<li>然后选择刚刚我们做的图标并替换即可</li>\n</ul>\n</li>\n</ul>\n<p><img src=\"https://img.ioioi.top/wiki/2018-03-08_16-20-13.png\" alt=\"pic\"></p>\n<p>最后保存更改并退出。</p>\n<p><strong>虽然现在已经更改了，但是因为 windows 存在图标缓存，所以并没有发生变化。你可以将<code class=\"language-text\">nw.exe</code>复制到其他文件夹，就会看到变化了</strong>。</p>\n<h2>2.3 打包文件</h2>\n<p>在我们工作目录下打开<code class=\"language-text\">cmd</code>，输入如下格式的命令：</p>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\">copy /b nw.exe+memobird.nw mimobird.exe</code></pre></div>\n<p><img src=\"https://img.ioioi.top/wiki/2018-03-08_16-25-06.png\" alt=\"pic\"></p>\n<ul>\n<li><code class=\"language-text\">memobird.nw</code>是我们创建并复制过来的</li>\n<li><code class=\"language-text\">memobird.exe</code>  将要是打包后并生成的文件的名字</li>\n</ul>\n<p>你根据你自己的文件吗进行修改即可。</p>\n<p>现在便可以打开<code class=\"language-text\">memobird.exe</code>看看效果了。</p>\n<p>目前该文件只能在当前目录下运行，因为他需要一些资源文件。</p>\n<p>接着，我们便把资源文件也一并打包进去。</p>\n<h1>3. 构建单文件执行程序</h1>\n<ul>\n<li>打开 Enigma Virtual Box\n<ul>\n<li>“封包主程”选择刚刚生成的 <code class=\"language-text\">memobird.exe</code></li>\n</ul>\n</li>\n</ul>\n<p>接着打开我们的工作目录，把所有文件都拖进下面的空白中：</p>\n<p><img src=\"https://img.ioioi.top/wiki/2018-03-08_16-31-06.png\" alt=\"pic4\"></p>\n<p>其中：<code class=\"language-text\">memobird.exe, memobird.nw</code>都是不需要的，你可以自己删掉。</p>\n<p>然后点击“执行封包”按钮开始封包。</p>\n<p><img src=\"https://img.ioioi.top/wiki/2018-03-08_16-32-40.png\" alt=\"pic5\"></p>\n<p>等待封包完成即可。</p>\n<p>这样，我们就简单并且快速地完成了创建了一个桌面程序，内部挂载的是原站点。</p>\n<p>实际上类似于浏览器的模式。</p>\n<p><img src=\"https://img.ioioi.top/wiki/2018-03-08_16-37-34.png\" alt=\"pic6\"></p>\n<hr>\n<p><em>参看</em>：</p>\n<ul>\n<li><a href=\"https://www.kancloud.cn/mikkle/thinkphp5_study/467061\">使用NW将我们开发的网站打包成桌面应用</a></li>\n<li><a href=\"http://keenwon.com/1311.html\">修改 node-webkit 的默认图标</a></li>\n</ul>","frontmatter":{"title":"使用 NW.js 创建简单的桌面应用","date":"2018-03-08","description":null,"excerpt":null}},"previous":{"fields":{"slug":"using-proxy-for-desktop-program-on-ubuntu"},"frontmatter":{"title":"如何在 Ubuntu 对桌面程序使用代理"}},"next":{"fields":{"slug":"using-viewpager-to-make-a-banner-1"},"frontmatter":{"title":"手动实现轮播图（一）：ViewPager 入门实践"}}},"pageContext":{"id":"98393af1-24c6-5be3-8228-08b237579199","previousPostId":"f87c04cc-e689-5bda-abae-f6df68d73041","nextPostId":"bcc466db-9561-5893-88fe-45bae75c6ef5"}},"staticQueryHashes":["2082311839","2355076697","959449634"],"slicesMap":{}}