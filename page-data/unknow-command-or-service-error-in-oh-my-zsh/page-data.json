{"componentChunkName":"component---src-templates-blog-post-js","path":"/unknow-command-or-service-error-in-oh-my-zsh/","result":{"data":{"site":{"siteMetadata":{"title":"Blog.kt"}},"markdownRemark":{"id":"e79a4a13-9c23-5f70-a94e-3abaebb6df4c","excerpt":"OS: Win10\nShell: Babun 1.2.0 这个问题发生在我执行命令之后，错误提示为： 如果执行  命令，会直接输出文件内容并且有以下提示： 这个问题可能是 Git 版本相关，具体原因不清楚，由此引发的 zsh 运行出错。 解决方法 在 oh-my-zsh 的 issue…","html":"<blockquote>\n<p>OS: Win10\nShell: Babun 1.2.0</p>\n</blockquote>\n<p>这个问题发生在我执行<code class=\"language-text\">Git</code>命令之后，错误提示为：</p>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\">compdef: unknown <span class=\"token builtin class-name\">command</span> or service: <span class=\"token function\">git</span></code></pre></div>\n<p>如果执行 <code class=\"language-text\">zsh</code> 命令，会直接输出<code class=\"language-text\">.zshrc</code>文件内容并且有以下提示：</p>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\">compdef: unknown <span class=\"token builtin class-name\">command</span> or service: <span class=\"token function\">git</span>\ncompdef: unknown <span class=\"token builtin class-name\">command</span> or service: <span class=\"token function\">grep</span>\ncompdef: unknown <span class=\"token builtin class-name\">command</span> or service: <span class=\"token function\">git</span></code></pre></div>\n<p>这个问题可能是 Git 版本相关，具体原因不清楚，由此引发的 zsh 运行出错。</p>\n<h1>解决方法</h1>\n<p>在 oh-my-zsh 的 issue 中有很多人有如下解决方法：</p>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\"><span class=\"token function\">rm</span> <span class=\"token parameter variable\">-f</span> ~/.zcompdump\ncompinit</code></pre></div>\n<p><a href=\"http://www.csse.uwa.edu.au/programming/linux/zsh-doc/zsh_23.html\">zsh-doc</a>里面介绍了<code class=\"language-text\">compinit</code>和<code class=\"language-text\">.zcompdump</code>之作用，大家可以自行查阅。\n我理解的意思就是，<code class=\"language-text\">compinit</code>为手动初始化<code class=\"language-text\">zsh</code>的命令，而为了加快<code class=\"language-text\">zsh</code>运行速度，<code class=\"language-text\">zsh</code>会自动生成一个<code class=\"language-text\">.zcompdump</code>文件进行使用。可能是类似于缓存文件的作用。\n一般情况下，上述两个命令进行手动初始化之后就没问题。不过后来版本的<code class=\"language-text\">zsh</code>貌似会对<code class=\"language-text\">.zcompdump</code>进行重命名，也就是生成带有版本号的<code class=\"language-text\">.zcompdump</code>诸如：<code class=\"language-text\">.zcompdump-modhelius-dell-5.0.2</code>。\n可能是在特殊环境下需要采用这样的做法，比如在 Cygwin 中。</p>\n<h1>Cygwin 中解决方法</h1>\n<p>执行：</p>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\">compinit\n<span class=\"token function\">cp</span> .zcompdump .zcompdump-<span class=\"token environment constant\">$HOSTNAME</span>-<span class=\"token variable\">$ZSH_VERSION</span></code></pre></div>\n<p>这样就生成了特定版本的<code class=\"language-text\">.zompdump</code>文件。此时应该就恢复正常了。</p>\n<hr>\n<p><em>参看</em>：</p>\n<ul>\n<li><a href=\"https://github.com/robbyrussell/oh-my-zsh/issues/630\">compdef: unknown command or service: git</a></li>\n<li><a href=\"http://babun.github.io/faq.html\">Babun FAQ</a></li>\n<li><a href=\"http://www.csse.uwa.edu.au/programming/linux/zsh-doc/zsh_23.html\">Completion System</a></li>\n</ul>","frontmatter":{"title":"修复 oh-my-zsh 和 Git 的搭配错误","date":"2017-08-04","description":null,"excerpt":null}},"previous":{"fields":{"slug":"Github-page-configure-and-enable-HTTPS"},"frontmatter":{"title":"GitHub Page 子域名配置 & 启用 HTTPS"}},"next":{"fields":{"slug":"Introduction-to-optimize-hexo-blog"},"frontmatter":{"title":"Hexo 博客优化入门（一）"}}},"pageContext":{"id":"e79a4a13-9c23-5f70-a94e-3abaebb6df4c","previousPostId":"f387e4c2-cbd8-525e-b175-8c8daf2744fd","nextPostId":"6b03c3b0-73a5-5745-8fb7-7d4d45157f18"}},"staticQueryHashes":["2082311839","2355076697","959449634"],"slicesMap":{}}